{"ast":null,"code":"var _jsxFileName = \"D:\\\\react js\\\\workspace\\\\react-project-almost-final\\\\src\\\\scheduledflight\\\\component\\\\AddScheduledFlights.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport ScheduledFlight from \"../model/scheduledflight\";\nimport ScheduledFlightService from \"../service/ScheduledFlightService\";\nimport { useNavigate } from \"react-router-dom\";\nimport FlightService from \"../../flight/service/FlightService\";\nimport ScheduleService from \"../../schedule/service/ScheduleService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AddScheduledFlights() {\n  _s();\n\n  const service = new ScheduledFlightService();\n  const flightService = new FlightService();\n  const scheduleService = new ScheduleService();\n  const navigate = useNavigate();\n  const [state, changeState] = React.useState({\n    scheduledFlight: new ScheduledFlight()\n  });\n  const [flights, changeFlights] = React.useState([]);\n  const [schedules, changeSchedules] = React.useState([]);\n  const [scheduleId, changeScheduleId] = React.useState([]);\n  const [flightId, changeFlightId] = React.useState();\n  React.useEffect(() => {\n    if (sessionStorage.getItem('userId') == null) {\n      alert('Unauthorised Access to Page.');\n      navigate('/login');\n    }\n\n    flightService.getAllFlights().then(data => {\n      changeFlights(data.data);\n    }).catch(() => {\n      alert(\"Problem in getting list of planes(flights)\");\n    });\n    scheduleService.getSchedules().then(data => {\n      changeSchedules(data.data);\n    }).catch(() => {\n      alert(\"Problem in getting schedules\");\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"my-4\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"badge badge-dark px-4 py-2\",\n          children: \"Schedule a flight\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Schedule\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          class: \"form-control\",\n          id: \"scheduleId\",\n          value: scheduleId,\n          onChange: event => changeScheduleId(event.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            children: \"Choose a schedule\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 21\n          }, this), schedules.map(schedule => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: schedule.scheduleId,\n            children: [schedule.sourceAirport.airportLocation, \" to \", schedule.destinationAirport.airportLocation, \", at \", new Date(schedule.departureTime).getHours(), \":\", new Date(schedule.departureTime).getMinutes(), \" to \", new Date(schedule.arrivalTime).getHours(), \":\", new Date(schedule.arrivalTime).getMinutes(), \", on \", new Date(schedule.departureTime.slice(0, 10)).getDate(), \" \", new Date(schedule.departureTime.slice(0, 10)).toLocaleString('default', {\n              month: 'short'\n            }), \" \", new Date(schedule.departureTime.slice(0, 10)).getFullYear()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 25\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Flight\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          class: \"form-control\",\n          id: \"flightId\",\n          value: flightId,\n          onChange: event => {\n            changeFlightId(event.target.value);\n            flightService.getFlight(event.target.value).then(data => {\n              changeState({\n                scheduledFlight: { ...state.scheduledFlight,\n                  availableSeats: data.data.seatCapacity\n                }\n              });\n            }).catch(() => {\n              alert(\"Change error.\");\n            });\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            children: \"Choose a flight\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 21\n          }, this), flights.map(flight => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: flight.flightNumber,\n            children: [\"Flight \", flight.flightNumber, \", \", flight.carrierName, \". \", flight.flightModel, \", seat capacity: \", flight.seatCapacity]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 25\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: event => {\n          event.preventDefault();\n          service.addScheduledFlight(state.scheduledFlight, scheduleId, flightId).then(() => {\n            alert(\"Scheduled Flight added\");\n            navigate(\"/scheduleFlight/admin\");\n          }).catch(() => {\n            alert(\"Problem in adding scheduled flights.\");\n          });\n        },\n        children: \"Add scheduled flight\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AddScheduledFlights, \"0Tpp0NZZsoObPyTis/SRifqJ+8k=\", false, function () {\n  return [useNavigate];\n});\n\n_c = AddScheduledFlights;\nexport default AddScheduledFlights;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddScheduledFlights\");","map":{"version":3,"sources":["D:/react js/workspace/react-project-almost-final/src/scheduledflight/component/AddScheduledFlights.js"],"names":["React","ScheduledFlight","ScheduledFlightService","useNavigate","FlightService","ScheduleService","AddScheduledFlights","service","flightService","scheduleService","navigate","state","changeState","useState","scheduledFlight","flights","changeFlights","schedules","changeSchedules","scheduleId","changeScheduleId","flightId","changeFlightId","useEffect","sessionStorage","getItem","alert","getAllFlights","then","data","catch","getSchedules","event","target","value","map","schedule","sourceAirport","airportLocation","destinationAirport","Date","departureTime","getHours","getMinutes","arrivalTime","slice","getDate","toLocaleString","month","getFullYear","getFlight","availableSeats","seatCapacity","flight","flightNumber","carrierName","flightModel","preventDefault","addScheduledFlight"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,eAAP,MAA4B,0BAA5B;AACA,OAAOC,sBAAP,MAAmC,mCAAnC;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,aAAP,MAA0B,oCAA1B;AACA,OAAOC,eAAP,MAA4B,wCAA5B;;;AAEA,SAASC,mBAAT,GAA8B;AAAA;;AAC1B,QAAMC,OAAO,GAAG,IAAIL,sBAAJ,EAAhB;AACA,QAAMM,aAAa,GAAG,IAAIJ,aAAJ,EAAtB;AACA,QAAMK,eAAe,GAAG,IAAIJ,eAAJ,EAAxB;AACA,QAAMK,QAAQ,GAAGP,WAAW,EAA5B;AACA,QAAK,CAACQ,KAAD,EAAQC,WAAR,IAAuBZ,KAAK,CAACa,QAAN,CAAe;AAACC,IAAAA,eAAe,EAAE,IAAIb,eAAJ;AAAlB,GAAf,CAA5B;AACA,QAAK,CAACc,OAAD,EAAUC,aAAV,IAA2BhB,KAAK,CAACa,QAAN,CAAe,EAAf,CAAhC;AACA,QAAK,CAACI,SAAD,EAAYC,eAAZ,IAA+BlB,KAAK,CAACa,QAAN,CAAe,EAAf,CAApC;AACA,QAAK,CAACM,UAAD,EAAaC,gBAAb,IAAiCpB,KAAK,CAACa,QAAN,CAAe,EAAf,CAAtC;AACA,QAAK,CAACQ,QAAD,EAAWC,cAAX,IAA6BtB,KAAK,CAACa,QAAN,EAAlC;AACAb,EAAAA,KAAK,CAACuB,SAAN,CAAgB,MAAI;AAChB,QAAGC,cAAc,CAACC,OAAf,CAAuB,QAAvB,KAAkC,IAArC,EAA2C;AACvCC,MAAAA,KAAK,CAAC,8BAAD,CAAL;AACAhB,MAAAA,QAAQ,CAAC,QAAD,CAAR;AACH;;AACDF,IAAAA,aAAa,CAACmB,aAAd,GAA8BC,IAA9B,CAAoCC,IAAD,IAAQ;AACvCb,MAAAA,aAAa,CAACa,IAAI,CAACA,IAAN,CAAb;AACH,KAFD,EAEGC,KAFH,CAES,MAAI;AACTJ,MAAAA,KAAK,CAAC,4CAAD,CAAL;AACH,KAJD;AAKAjB,IAAAA,eAAe,CAACsB,YAAhB,GAA+BH,IAA/B,CAAqCC,IAAD,IAAQ;AACxCX,MAAAA,eAAe,CAACW,IAAI,CAACA,IAAN,CAAf;AACH,KAFD,EAEGC,KAFH,CAES,MAAI;AACTJ,MAAAA,KAAK,CAAC,8BAAD,CAAL;AACH,KAJD;AAKH,GAfD,EAeG,EAfH;AAgBA,sBACI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA,2BACI;AAAA,8BACI;AAAA,+BAAI;AAAM,UAAA,SAAS,EAAC,4BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAJ;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAK,QAAA,KAAK,EAAC,YAAX;AAAA,gCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAQ,UAAA,KAAK,EAAC,cAAd;AAA6B,UAAA,EAAE,EAAC,YAAhC;AACA,UAAA,KAAK,EAAIP,UADT;AAEA,UAAA,QAAQ,EAAKa,KAAD,IAASZ,gBAAgB,CAACY,KAAK,CAACC,MAAN,CAAaC,KAAd,CAFrC;AAAA,kCAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHA,EAICjB,SAAS,CAACkB,GAAV,CAAeC,QAAD,iBACX;AAAQ,YAAA,KAAK,EAAEA,QAAQ,CAACjB,UAAxB;AAAA,uBAAqCiB,QAAQ,CAACC,aAAT,CAAuBC,eAA5D,UAAiFF,QAAQ,CAACG,kBAAT,CAA4BD,eAA7G,WAAmI,IAAIE,IAAJ,CAASJ,QAAQ,CAACK,aAAlB,EAAiCC,QAAjC,EAAnI,OAAiL,IAAIF,IAAJ,CAASJ,QAAQ,CAACK,aAAlB,EAAiCE,UAAjC,EAAjL,UAAoO,IAAIH,IAAJ,CAASJ,QAAQ,CAACQ,WAAlB,EAA+BF,QAA/B,EAApO,OAAgR,IAAIF,IAAJ,CAASJ,QAAQ,CAACQ,WAAlB,EAA+BD,UAA/B,EAAhR,WAAkU,IAAIH,IAAJ,CAASJ,QAAQ,CAACK,aAAT,CAAuBI,KAAvB,CAA6B,CAA7B,EAA+B,EAA/B,CAAT,EAA6CC,OAA7C,EAAlU,OAA2X,IAAIN,IAAJ,CAASJ,QAAQ,CAACK,aAAT,CAAuBI,KAAvB,CAA6B,CAA7B,EAA+B,EAA/B,CAAT,EAA6CE,cAA7C,CAA4D,SAA5D,EAAuE;AAACC,cAAAA,KAAK,EAAE;AAAR,aAAvE,CAA3X,OAAsd,IAAIR,IAAJ,CAASJ,QAAQ,CAACK,aAAT,CAAuBI,KAAvB,CAA6B,CAA7B,EAA+B,EAA/B,CAAT,EAA6CI,WAA7C,EAAtd;AAAA;AAAA;AAAA;AAAA;AAAA,kBADH,CAJD;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,eAaI;AAAK,QAAA,KAAK,EAAC,YAAX;AAAA,gCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAQ,UAAA,KAAK,EAAC,cAAd;AAA6B,UAAA,EAAE,EAAC,UAAhC;AACA,UAAA,KAAK,EAAI5B,QADT;AAEA,UAAA,QAAQ,EAAKW,KAAD,IAAS;AACjBV,YAAAA,cAAc,CAACU,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAd;AACA1B,YAAAA,aAAa,CAAC0C,SAAd,CAAwBlB,KAAK,CAACC,MAAN,CAAaC,KAArC,EAA4CN,IAA5C,CAAkDC,IAAD,IAAQ;AACrDjB,cAAAA,WAAW,CAAC;AAACE,gBAAAA,eAAe,EAAE,EAAC,GAAGH,KAAK,CAACG,eAAV;AAA2BqC,kBAAAA,cAAc,EAAEtB,IAAI,CAACA,IAAL,CAAUuB;AAArD;AAAlB,eAAD,CAAX;AACH,aAFD,EAEGtB,KAFH,CAES,MAAI;AACTJ,cAAAA,KAAK,CAAC,eAAD,CAAL;AACH,aAJD;AAKH,WATD;AAAA,kCAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAVA,EAWCX,OAAO,CAACoB,GAAR,CAAakB,MAAD,iBACT;AAAQ,YAAA,KAAK,EAAEA,MAAM,CAACC,YAAtB;AAAA,kCAA4CD,MAAM,CAACC,YAAnD,QAAmED,MAAM,CAACE,WAA1E,QAAyFF,MAAM,CAACG,WAAhG,uBAA8HH,MAAM,CAACD,YAArI;AAAA;AAAA;AAAA;AAAA;AAAA,kBADH,CAXD;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAbJ,eA+BI;AAAQ,QAAA,SAAS,EAAC,iBAAlB;AAAoC,QAAA,OAAO,EAAGpB,KAAD,IAAS;AAClDA,UAAAA,KAAK,CAACyB,cAAN;AACAlD,UAAAA,OAAO,CAACmD,kBAAR,CAA2B/C,KAAK,CAACG,eAAjC,EAAkDK,UAAlD,EAA8DE,QAA9D,EAAwEO,IAAxE,CAA6E,MAAI;AAC7EF,YAAAA,KAAK,CAAC,wBAAD,CAAL;AACAhB,YAAAA,QAAQ,CAAC,uBAAD,CAAR;AACH,WAHD,EAGGoB,KAHH,CAGS,MAAI;AACTJ,YAAAA,KAAK,CAAC,sCAAD,CAAL;AACH,WALD;AAOH,SATD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cA/BJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AA8CH;;GAxEQpB,mB;UAIYH,W;;;KAJZG,mB;AA0ET,eAAeA,mBAAf","sourcesContent":["import React from \"react\";\r\nimport ScheduledFlight from \"../model/scheduledflight\";\r\nimport ScheduledFlightService from \"../service/ScheduledFlightService\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport FlightService from \"../../flight/service/FlightService\";\r\nimport ScheduleService from \"../../schedule/service/ScheduleService\";\r\n\r\nfunction AddScheduledFlights(){\r\n    const service = new ScheduledFlightService();\r\n    const flightService = new FlightService();\r\n    const scheduleService = new ScheduleService();\r\n    const navigate = useNavigate();\r\n    const[state, changeState] = React.useState({scheduledFlight: new ScheduledFlight()});\r\n    const[flights, changeFlights] = React.useState([]);\r\n    const[schedules, changeSchedules] = React.useState([]);\r\n    const[scheduleId, changeScheduleId] = React.useState([]);\r\n    const[flightId, changeFlightId] = React.useState();\r\n    React.useEffect(()=>{\r\n        if(sessionStorage.getItem('userId')==null) {\r\n            alert('Unauthorised Access to Page.');\r\n            navigate('/login');\r\n        }\r\n        flightService.getAllFlights().then((data)=>{\r\n            changeFlights(data.data);\r\n        }).catch(()=>{\r\n            alert(\"Problem in getting list of planes(flights)\");\r\n        })\r\n        scheduleService.getSchedules().then((data)=>{\r\n            changeSchedules(data.data);\r\n        }).catch(()=>{\r\n            alert(\"Problem in getting schedules\");\r\n        })\r\n    }, []);\r\n    return(\r\n        <div className=\"my-4\">\r\n            <form>\r\n                <h2><span className='badge badge-dark px-4 py-2'>Schedule a flight</span></h2>\r\n                <div class=\"form-group\">\r\n                    <label>Schedule</label>\r\n                    <select class=\"form-control\" id=\"scheduleId\"\r\n                    value = {scheduleId}\r\n                    onChange = {(event)=>changeScheduleId(event.target.value)}>\r\n                    <option>Choose a schedule</option> \r\n                    {schedules.map((schedule)=>(\r\n                        <option value={schedule.scheduleId}>{schedule.sourceAirport.airportLocation} to {schedule.destinationAirport.airportLocation}, at {new Date(schedule.departureTime).getHours()}:{new Date(schedule.departureTime).getMinutes()} to {new Date(schedule.arrivalTime).getHours()}:{new Date(schedule.arrivalTime).getMinutes()}, on {new Date(schedule.departureTime.slice(0,10)).getDate()} {new Date(schedule.departureTime.slice(0,10)).toLocaleString('default', {month: 'short'})} {new Date(schedule.departureTime.slice(0,10)).getFullYear()}</option>  \r\n                    ))}\r\n                    </select>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <label>Flight</label>\r\n                    <select class=\"form-control\" id=\"flightId\"\r\n                    value = {flightId}\r\n                    onChange = {(event)=>{\r\n                        changeFlightId(event.target.value);\r\n                        flightService.getFlight(event.target.value).then((data)=>{\r\n                            changeState({scheduledFlight: {...state.scheduledFlight, availableSeats: data.data.seatCapacity}});\r\n                        }).catch(()=>{\r\n                            alert(\"Change error.\");\r\n                        })\r\n                    }}>\r\n                    <option>Choose a flight</option> \r\n                    {flights.map((flight)=>(\r\n                        <option value={flight.flightNumber}>Flight {flight.flightNumber}, {flight.carrierName}. {flight.flightModel}, seat capacity: {flight.seatCapacity}</option>  \r\n                    ))}\r\n                    </select>\r\n                </div>\r\n                <button className=\"btn btn-primary\" onClick={(event)=>{\r\n                    event.preventDefault();\r\n                    service.addScheduledFlight(state.scheduledFlight, scheduleId, flightId).then(()=>{\r\n                        alert(\"Scheduled Flight added\");\r\n                        navigate(\"/scheduleFlight/admin\")\r\n                    }).catch(()=>{\r\n                        alert(\"Problem in adding scheduled flights.\")\r\n                    })\r\n                    \r\n                }}>Add scheduled flight</button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AddScheduledFlights;"]},"metadata":{},"sourceType":"module"}